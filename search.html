<script src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', async () => {
  const res = await fetch('{{ "/search.json" | relative_url }}');
  const docs = await res.json();
  console.log("Loaded docs:", docs); // ðŸ‘ˆ should print array of docs

  const idx = lunr(function () {
    this.ref("url");
    this.field("title");
    docs.forEach(doc => this.add(doc));
  });

  console.log("Index ready. Try: idx.search('hello')", idx);

  // Manual test:
  console.log(idx.search("hello"));
});
</script>
